package com.example.marcadechoferes.mainscreen.profile.viewmodel

import android.R.attr
import android.content.Context
import android.content.Intent
import android.graphics.BitmapFactory
import android.os.Bundle
import android.util.Base64
import androidx.core.content.ContextCompat
import androidx.lifecycle.LiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.marcadechoferes.Extra.TinyDB
import com.example.marcadechoferes.auth.createpassword.CreateNewPasswordScreen
import com.example.marcadechoferes.auth.repository.AuthRepository
import com.example.marcadechoferes.auth.signin.SignInActivity
import com.example.marcadechoferes.databinding.FragmentProfileBinding
import com.example.marcadechoferes.loadingScreen.LoadingScreen
import com.example.marcadechoferes.mainscreen.MainActivity
import com.example.marcadechoferes.network.ResponseException
import com.example.marcadechoferes.network.signinResponse.Profile
import dagger.hilt.android.lifecycle.HiltViewModel
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
import javax.inject.Inject
import android.graphics.Bitmap

import android.R.attr.bitmap
import java.io.ByteArrayOutputStream
import java.util.*
import kotlin.concurrent.schedule


@HiltViewModel
class ProfileViewModel @Inject constructor(val authRepository: AuthRepository) : ViewModel() {
    var activityContext: Context? = null
    lateinit var tinyDB: TinyDB
    lateinit var dataBinding: FragmentProfileBinding
    fun viewsForFragment(context: Context, binding: FragmentProfileBinding) {
        activityContext = context
        dataBinding = binding
        tinyDB = TinyDB(context)
        getProfile()
//        var image=tinyDB.getString("Avatar")
       var image="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"


        Base64ToBitmap(image.toString())


        binding.apply {


            edit.setOnClickListener {

                var intent = Intent(context, CreateNewPasswordScreen::class.java)
                ContextCompat.startActivity(context, intent, Bundle.EMPTY)
                (context as MainActivity).finish()

            }


            Logout.setOnClickListener {
                logoutUser()
                var intent = Intent(context, LoadingScreen::class.java)
                ContextCompat.startActivity(context, intent, Bundle.EMPTY)
            }
        }


    }


    fun logoutUser() {

        viewModelScope.launch {

            withContext(Dispatchers.IO) {
                try {
                    val name = tinyDB.getString("User")
                    val response =
                        authRepository.logoutUser(name!!)

                    println("SuccessResponse $response")

                    if (response != null) {
                        authRepository.clearData()
                        tinyDB.clear()
                        var intent = Intent(activityContext, SignInActivity::class.java)
                        ContextCompat.startActivity(activityContext!!, intent, Bundle.EMPTY)
                        (activityContext as MainActivity).finish()
                    }

                } catch (e: ResponseException) {
                    println("logout Failed $e")
                }
            }
        }


    }


    fun getProfile() {

        viewModelScope.launch {
            withContext(Dispatchers.IO) {

                var profile = authRepository.getProfile()
                dataBinding.apply {
                    Name.text = profile.name
                    surName.text = profile.surname
                    TitleName.text = profile.name
                    FatherName.text = profile.surname
                    Email.text = tinyDB.getString("User")

                }
                println("user personal data $profile")
            }

        }
    }

    fun Base64ToBitmap(base64: String) {
        val imageBytes = Base64.decode(base64, 0)
        val image = BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.size)
        dataBinding.profileImage.setImageBitmap(image)
        println("imageprinted")


    }

    fun bitmapToBase64(bitmapImage:Bitmap){
        val byteArrayOutputStream = ByteArrayOutputStream()
        bitmapImage.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream)
        val byteArray: ByteArray = byteArrayOutputStream.toByteArray()
        val encoded = Base64.encodeToString(byteArray, Base64.DEFAULT)
        println("encoded $encoded")
        Base64ToBitmap(encoded)

    }
}